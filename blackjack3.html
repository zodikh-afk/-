<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–ª–µ–∫–¥–∂–µ–∫ ‚Äî 3 –∏–≥—Ä–æ–∫–∞</title>

    <link rel="stylesheet" href="style.css">

    <style>
        .game {
            display: flex;
            gap: 60px;
            justify-content: center;
            margin-top: 30px;
        }
        .player h2 { text-align:center; margin-bottom:10px; }
        .deck {
            display:flex;
            gap:12px;
            justify-content:center;
            align-items:center;
        }
        .score{
            margin-top:10px;
            text-align:center;
            font-size:1.2em;
            color:gold;
        }
    </style>
</head>

<body>
<header>
    <nav class="nav">
      <a href="index.html">2 –∏–≥—Ä–æ–∫–∞</a>
      <a href="three.html">3 –∏–≥—Ä–æ–∫–∞</a>
      <a href="four.html">4 –∏–≥—Ä–æ–∫–∞</a>
      <a href="blackjack.html">–ë–ª–µ–∫–¥–∂–µ–∫</a>
      <a href="blackjack3.html">–ë–ª–µ–∫–¥–∂–µ–∫ 3 –∏–≥—Ä–æ–∫–∞</a>
    </nav>
</header>

<h1>–ë–ª–µ–∫–¥–∂–µ–∫ ‚Äî –ø–æ –¥–≤–µ –∫–∞—Ä—Ç—ã –¥–ª—è 3 –∏–≥—Ä–æ–∫–æ–≤</h1>
<div style="text-align:center;"><button id="start">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button></div>

<div class="game">
    <div class="player">
        <h2>–ò–≥—Ä–æ–∫ 1</h2>
        <div class="deck" id="deck1"></div>
        <div id="score1" class="score"></div>
    </div>

    <div class="player">
        <h2>–ò–≥—Ä–æ–∫ 2</h2>
        <div class="deck" id="deck2"></div>
        <div id="score2" class="score"></div>
    </div>

    <div class="player">
        <h2>–ò–≥—Ä–æ–∫ 3</h2>
        <div class="deck" id="deck3"></div>
        <div id="score3" class="score"></div>
    </div>
</div>

<div id="result" style="text-align:center;margin-top:20px;font-size:1.4em;"></div>

<script>
const suits=[{symbol:'‚ô•',color:'red'},{symbol:'‚ô¶',color:'red'},{symbol:'‚ô£',color:'black'},{symbol:'‚ô†',color:'black'}];
const values=['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
function randomCard(){const s=suits[Math.floor(Math.random()*suits.length)];const v=values[Math.floor(Math.random()*values.length)];return{value:v,suit:s};}
function cardValue(v){if(v==='A')return 11; if(['K','Q','J'].includes(v))return 10; return parseInt(v);}    

function clearTable(){ for(let p=1;p<=3;p++){document.getElementById(`deck${p}`).innerHTML="";document.getElementById(`score${p}`).textContent="";} document.getElementById("result").textContent="";}    

function createCardElement(card){
    const slot=document.createElement("div"); slot.className="card-slot";
    slot.innerHTML=`<div class="card-inner"><div class="card-face card-back">üÇ†</div><div class="card-face card-front ${card.suit.color}"><div class="corner top">${card.value}<br>${card.suit.symbol}</div><div class="center">${card.suit.symbol}</div><div class="corner bottom">${card.value}<br>${card.suit.symbol}</div></div></div>`;
    setTimeout(()=>slot.querySelector('.card-inner').classList.add('flip'),50);
    return slot;
}

function deal(){
    clearTable();
    let playersCards={1:[],2:[],3:[]};

    for(let p=1;p<=3;p++){
        for(let i=0;i<2;i++){
            const c=randomCard();
            playersCards[p].push(c);
            document.getElementById(`deck${p}`).appendChild(createCardElement(c));
        }
    }

    for(let p=1;p<=3;p++){
        let sum=playersCards[p].reduce((a,c)=>a+cardValue(c.value),0);
        document.getElementById(`score${p}`).textContent=`–û—á–∫–∏: ${sum}`;
    }

    let scores=[1,2,3].map(p=>({p,total:playersCards[p].reduce((a,c)=>a+cardValue(c.value),0)}));
    let max=Math.max(...scores.map(s=>s.total));
    let winners=scores.filter(s=>s.total===max);

    if(winners.length===1) document.getElementById("result").textContent=`üèÜ –ü–æ–±–µ–¥–∏–ª –∏–≥—Ä–æ–∫ ${winners[0].p} (${max} –æ—á–∫–æ–≤)`;
    else document.getElementById("result").textContent=`ü§ù –ù–∏—á—å—è! (${max} –æ—á–∫–æ–≤)`;
}

document.getElementById("start").onclick=deal;
</script>

</body>
</html>
